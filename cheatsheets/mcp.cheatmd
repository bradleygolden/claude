# MCP Servers Cheatsheet

## Quick Reference

### Configuration Format (.claude.exs)

```elixir
%{
  mcp_servers: [
    # Simple format
    :tidewave,
    
    # With options
    {:tidewave, [port: 5000]},
    
    # Disabled
    {:tidewave, [enabled?: false]}
  ]
}
```

### Server Options

| Option | Type | Default | Description |
|--------|------|---------|-------------|
| `port` | integer | varies | Custom port number |
| `enabled?` | boolean | `true` | Enable/disable server |

### Available Servers

| Server | Auto-Install | Description | Link |
|--------|--------------|-------------|------|
| `:tidewave` | Phoenix projects | Phoenix dev tools | [tidewave.ai](https://tidewave.ai/) |

### Installation Flow

```bash
# Step 1: Configure in .claude.exs
# Step 2: Run install to sync
mix claude.install

# Creates/updates .mcp.json
```

### Generated .mcp.json

```json
{
  "mcpServers": {
    "tidewave": {
      "command": "npx",
      "args": ["-y", "@bradleygolden/mcp-server-tidewave"],
      "env": {
        "PORT": "4000"
      }
    }
  }
}
```

### Phoenix Auto-Configuration

```elixir
# Automatically added when Phoenix detected:
%{
  mcp_servers: [:tidewave]
}
```

### Custom Port Configuration

```elixir
# Development
{:tidewave, [port: 4000]}

# Staging  
{:tidewave, [port: 4001]}

# Local testing
{:tidewave, [port: 5000]}
```

### Disable Without Removing

```elixir
# Temporarily disable
{:tidewave, [enabled?: false]}

# Re-enable later
{:tidewave, [enabled?: true]}  # or just :tidewave
```

### Manual .mcp.json

If you need custom MCP servers not managed by Claude:

```json
{
  "mcpServers": {
    "custom-server": {
      "command": "node",
      "args": ["path/to/server.js"],
      "env": {
        "API_KEY": "secret"
      }
    }
  }
}
```

### Troubleshooting

| Issue | Solution |
|-------|----------|
| Server not starting | Check port availability |
| Port conflict | Use custom port option |
| Server not found | Check .mcp.json exists |
| Changes not applied | Run `mix claude.install` |

### Port Defaults

| Project Type | Default Port |
|--------------|--------------|
| Phoenix | 4000 |
| LiveView | 4000 |
| Custom Phoenix | From `config/dev.exs` |

### Environment Variables

MCP servers receive these env vars:

```elixir
# From .mcp.json
"env": {
  "PORT": "4000",           # Server port
  "PROJECT_DIR": "/path/to/project"
}
```

## Common Patterns

### Development Setup

```elixir
%{
  mcp_servers: [
    {:tidewave, [port: 4000]}  # Match Phoenix dev port
  ]
}
```

### Multi-Environment

```elixir
%{
  mcp_servers: [
    # Use environment variable
    {:tidewave, [port: System.get_env("MCP_PORT", "4000")]}
  ]
}
```

### Request New Servers

Want support for a new MCP server?

[Request here â†’](https://github.com/bradleygolden/claude/issues/new?title=MCP%20Server%20Request:%20[Name])

## See Also

- [MCP Servers Guide](../documentation/guide-mcp.md) - Complete documentation
- [Official MCP Docs](https://docs.anthropic.com/en/docs/claude-code/mcp)